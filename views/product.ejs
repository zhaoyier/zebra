<div class="row">
    <% products.forEach(function (p, index) { %>
    <div class="col-md-3">
        <div class="thumbnail">
            <a>
                <img src="<%= p.image%>" onclick="getDetail(<%= p.id%>)">
            </a>
            <div class="caption">
                <p id="nickname">
                    昵称: <%=p.nickname %>
                </p>
                <p>
                    年龄: <%=p.age%>
                </p>
                <p>
                    手机号: <%=p.mobile%>
                </p>
                <p>
                    <a class="btn btn-primary" href="#">Action</a> <a class="btn" href="#">Action</a>
                </p>
            </div>
        </div>
    </div>
    <% }) %>
</div>
<script type="text/javascript">
    function getDetail(pid) {
        $.ajax({
            url: '/detail',
            type: 'POST',
            data: {pid: $("#product_id").text()},
            success: function(data){
                if(200 === data.code) {
                    window.open("./detail?pid="+pid)
                } else {
                    console.log("===>>1002:\t", data)
                    window.open("/index")

                }
            },
            error: function(){
                console.log("与服务器通信发生错误")
            }
        });
    }
</script>

